character_selection:
  widgets:
    - position: { x: 100, y: 300 } # p0
    - position: { x: 400, y: 300 } # p1
    - position: { x: 100, y: 100 } # p2
    - position: { x: 400, y: 100 } # p3

  widget_template:
    portraits:
      join: "portrait_press_to_join"
      random: "portrait_random"

    layers:
      main:
        sequence: "widget_inactive"
        position: { x: 0, y: 0 }
      portrait:
        sequence: "portrait_press_to_join"
        position: { x: 0, y: 0 }

sequences:
  widget_inactive:
    input_reactions:
      press_attack:
        next: "widget_character_select"
        events: [{ character_selection: "join" }]
    frames:
      - { wait: 3, sprite: { sheet: 1, index: 0 } }

  widget_character_select:
    next: "repeat"
    input_reactions:
      press_attack:
        next: "widget_confirmed"
        events: [{ character_selection: "select" }]
      press_jump:
        next: "widget_inactive"
        events: [{ character_selection: "leave" }]
      press_x:
        - next: "widget_character_select"
          events: [{ character_selection: { switch: "previous" } }]
          requirement: [{ input_dir_x: "left" }]
        - next: "widget_character_select"
          events: [{ character_selection: { switch: "next" } }]
          requirement: [{ input_dir_x: "right" }]

    frames:
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.2, g: 0.4, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.25, g: 0.5, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.3, g: 0.6, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.35, g: 0.7, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.3, g: 0.6, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.25, g: 0.5, b: 1.0 } }

  widget_confirmed:
    next: "repeat"
    input_reactions:
      press_attack:
        next: "widget_confirmed"
        events: [{ character_selection: "confirm" }]
      press_jump:
        next: "widget_character_select"
        events: [{ character_selection: "deselect" }]
    frames:
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.6, g: 0.4, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.65, g: 0.5, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.7, g: 0.6, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.75, g: 0.7, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.7, g: 0.6, b: 1.0 } }
      - { wait: 3, sprite: { sheet: 1, index: 0 }, tint: { r: 0.65, g: 0.5, b: 1.0 } }

  portrait_press_to_join:
    next: "repeat"
    frames:
      - { wait: 2, sprite: { sheet: 2, index: 0 } }
      - { wait: 2, sprite: { sheet: 2, index: 1 } }
      - { wait: 2, sprite: { sheet: 2, index: 2 } }
      - { wait: 2, sprite: { sheet: 2, index: 3 } }
      - { wait: 2, sprite: { sheet: 2, index: 4 } }
      - { wait: 2, sprite: { sheet: 2, index: 5 } }
      - { wait: 2, sprite: { sheet: 2, index: 6 } }
      - { wait: 2, sprite: { sheet: 2, index: 7 } }
      - { wait: 2, sprite: { sheet: 2, index: 8 } }

  portrait_random:
    frames:
      - { wait: 2, sprite: { sheet: 3, index: 0 } }
